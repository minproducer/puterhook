<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="https://js.puter.com/v2/"></script>
</head>

<body>
    <div id="result"></div>

    <script>
        (async () => {
            await puter.ready;

            const result = document.getElementById('result');
            const output = (data) => {
                result.textContent = JSON.stringify(data, null, 2);
                const meta = document.createElement('meta');
                meta.httpEquiv = 'Content-Type';
                meta.content = 'application/json';
                document.head.appendChild(meta);
            };

            const q = new URLSearchParams(location.search).get('q');
            if (!q) {
                output({ error: 'Missing parameter q' });
                return;
            }

            try {
                const answer = await puter.ai.chat(q, { model: 'gpt-4o' });
                output({
                    question: q,
                    answer: answer,
                    timestamp: new Date().toISOString()
                });
            } catch (e) {
                output({ error: e.message });
            }
        })();
    </script>
</body>

</html>